
<html>
    
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="style-src 'unsafe-inline' data: datas: dfwapps: file: *;script-src 'unsafe-inline' data: datas: dfwapps: file: *">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, user-scalable=no"/>
    <link rel="stylesheet" href="dfwapps://static.dongfangfuli.com/family/umi.css">
    <link rel="stylesheet" href="dfwapps://aaronlianggq.github.io/find.css">
    <link rel="stylesheet" href="data:aHR0cHM6Ly9hYXJvbmxpYW5nZ3EuZ2l0aHViLmlvL2ZpbmQuY3Nz">
    <link rel="stylesheet" href="data:text/plain,https://static.dongfangfuli.com/family/umi.css">

    <!-- <link rel="stylesheet" href="./find.css">  -->
<!--     <script src="https://pss.bdstatic.com/r/www/cache/static/protocol/https/plugins/bzPopper_7bc4f0e.js"> </script> -->
    <script language="javascript">

        window.onload = function() {
        }

        function showUserAgent() {
            document.getElementById('btn15').innerHTML = "userAgent: " + navigator.userAgent
        }

        function showCookie() {
            var cookie = document.cookie
            document.getElementById('btn16').innerHTML = "cookie: " + cookie
	    document.cookie = 'lgg_github_demo=newCity;domain=aaronlianggq.github.io;path=/'; 
        }

        function showTime() {
            
        }

        function addCookie() {
            const xhr = new XMLHttpRequest();
            //2.初始化  设置请求方法和url
            xhr.open('GET', '/common/openapi?union=df&city=145&client_id=CCPBSs8e8n&reload=1');
            //3.发送
            xhr.send();
            //4. 事件绑定 处理服务端返回的结果
            // on  when  当....的时候
            // readystate 是 xhr 对象中的属性，表示状态 0 1 2 3 4
            xhr.onreadystatechange = function () {
                //判断 （服务端返回了所有的结果）
                if (xhr.readyState === 4) {
                    //判断响应状态码 200 404 403 401 500
                    //2xx 成功
                    if (xhr.status >= 200 && xhr.status < 300) {
                    }
                    console.log(xhr.response)
                }
            }
        }

        function deleteCookie() {
            const xhr = new XMLHttpRequest();
            //2.初始化  设置请求方法和url
            xhr.open('GET', '//app.dongfangfuli.com/common/openapi?union=df&city=145&client_id=CCPBSs8e8n&reload=1');
            //3.发送
            xhr.send();
            //4. 事件绑定 处理服务端返回的结果
            // on  when  当....的时候
            // readystate 是 xhr 对象中的属性，表示状态 0 1 2 3 4
            xhr.onreadystatechange = function () {
                //判断 （服务端返回了所有的结果）
                if (xhr.readyState === 4) {
                    //判断响应状态码 200 404 403 401 500
                    //2xx 成功
                    if (xhr.status >= 200 && xhr.status < 300) {
                    }
                    console.log(xhr.response)
                }
            }
        }
	    
	function downFileTest() {
            // 要监控请求进度，可以在 xhr 对象上注册进度相关的事件
            // 每个请求，开始都会触发 loadStart，结束都会触发 loadEnd 事件，它们之间，
            // 还可能会触发一个或多个其他事件，有些事件可能会多次触发。
            let xhr = new XMLHttpRequest();
            xhr.open("GET","https://aaronlianggq.github.io/DongFuWang.ipa");
            xhr.addEventListener("progress", updateProgress);
            xhr.addEventListener("load" , transferComplete);
            xhr.addEventListener("error", transferFailed  );
            xhr.addEventListener("abort", transferCanceled);
            xhr.send()
            xhr.onreadystatechange = () => {
                console.log("readyState = " + xhr.readyState + "，status = " + xhr.status);
            }
        }

        // 服务端到客户端的传输进程（下载）
        function updateProgress (event) {
            // 如果 `lengthComputable` 属性的值是 false，那么意味着总字节数是未知并且 total 的值为零。
            if (event.lengthComputable) {
                let progress = event.loaded / event.total * 100;
                document.getElementById('btn501').innerHTML = '加载进度：' + progress + '%'
                console.log('加载进度：' + progress + '%') // 一个百分比进度
            } else {
                // 总大小未知时不能计算进度信息
            }
        }
        function transferComplete(event) {
            console.log("传输完成");
            document.getElementById('btn501').innerHTML = "传输完成"

        }
        function transferFailed(event) {
            console.log("传输失败");
            document.getElementById('btn501').innerHTML = "传输失败"

        }
        function transferCanceled(event) {
            console.log("该请求已经被取消");
            document.getElementById('btn501').innerHTML = "该请求已经被取消"
        }

		
        
    </script>


    <style type="text/css">
        body {
            background-color: #ffffff;
        }

    </style>
</head>
<body>
    <script src="data://static.dongfangfuli.com/family/umi.js"> </script>
    <div>
     <div class="moudle_list"> DFWUtils
      <div class="moudle_list_item" id="btn15" onclick="showUserAgent()" >userAgent: </div>
      <div class="moudle_list_item" id="btn16" onclick="showCookie()" >cookie: </div>
      <div class="moudle_list_item" id="btn17" onclick="showTime()" >time: </div>
      <div class="moudle_list_item" id="btn1" onclick="addCookie()" >setCookie </div>
      <div class="moudle_list_item" id="btn2" onclick="deleteCookie()" >delCookie </div>
      <div class="moudle_list_item" id="btn500" onclick="downFileTest()" >下载测试 </div>
      <div class="moudle_list_item" id="btn501" >显示下载状态 </div>
     </div>
     <img src="dfwapps://bfd-prd.oss-cn-shanghai.aliyuncs.com/bfd/2022-04-26/3899d69743fb4c3696dce9a4fe417a3f.png"></img>
    </div>
</body>



</html>
